# 8ì¼ì°¨: ì„œë¹„ìŠ¤ ì§€í–¥ ì•„í‚¤í…ì²˜ ì‹¬í™”

## í•™ìŠµ ëª©í‘œ
- ì„œë¹„ìŠ¤ ë ˆì´ì–´ ì•„í‚¤í…ì²˜ì˜ ì„¤ê³„ ì›ì¹™ì„ ì´í•´í•œë‹¤
- ì˜ì¡´ì„± ì£¼ì…ê³¼ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ë¥¼ í•™ìŠµí•œë‹¤
- DatabaseManagerì˜ ê³ ê¸‰ íŒ¨í„´ì„ ë¶„ì„í•œë‹¤
- MonitoringServiceì˜ ë³µí•© ì„œë¹„ìŠ¤ ê´€ë¦¬ë¥¼ íŒŒì•…í•œë‹¤

## ì´ë¡  í•™ìŠµ

### ì„œë¹„ìŠ¤ ì§€í–¥ ì•„í‚¤í…ì²˜ (SOA)ì˜ í•µì‹¬ ì›ì¹™

#### 1. Single Responsibility Principle (ë‹¨ì¼ ì±…ì„ ì›ì¹™)
ê° ì„œë¹„ìŠ¤ëŠ” í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ì—ë§Œ ì§‘ì¤‘í•©ë‹ˆë‹¤.

```typescript
// âŒ ë‚˜ìœ ì˜ˆ: ëª¨ë“  ì±…ì„ì´ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì—
class AllInOneService {
  saveUser(user) { /* ì‚¬ìš©ì ì €ì¥ */ }
  sendEmail(email) { /* ì´ë©”ì¼ ë°œì†¡ */ }
  logActivity(log) { /* ë¡œê¹… */ }
  validateInput(data) { /* ê²€ì¦ */ }
}

// âœ… ì¢‹ì€ ì˜ˆ: ì±…ì„ë³„ë¡œ ë¶„ë¦¬
class UserService { saveUser(user) { /* ì‚¬ìš©ì ê´€ë¦¬ë§Œ */ } }
class EmailService { sendEmail(email) { /* ì´ë©”ì¼ë§Œ */ } }
class LoggingService { logActivity(log) { /* ë¡œê¹…ë§Œ */ } }
class ValidationService { validateInput(data) { /* ê²€ì¦ë§Œ */ } }
```

#### 2. Dependency Injection (ì˜ì¡´ì„± ì£¼ì…)
ì„œë¹„ìŠ¤ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ ë†’ì…ë‹ˆë‹¤.

```typescript
// âœ… ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•œ ëŠìŠ¨í•œ ê²°í•©
class MonitoringService {
  constructor(
    private databaseManager: DatabaseManager,      // ë°ì´í„° ê´€ë¦¬
    private notificationService: NotificationService, // ì•Œë¦¼ ê´€ë¦¬
    private settingsService: SettingsService      // ì„¤ì • ê´€ë¦¬
  ) {
    // ê° ì„œë¹„ìŠ¤ë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©
  }
}
```

#### 3. Interface Segregation (ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬)
í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.

```typescript
// í° ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„ë¦¬
interface IDataReader {
  read(id: string): Promise<any>;
}

interface IDataWriter {
  create(data: any): Promise<any>;
  update(data: any): Promise<any>;
}

interface IDataDeleter {
  delete(id: string): Promise<boolean>;
}
```

## ì½”ë“œ ë¶„ì„

### DatabaseManager ì•„í‚¤í…ì²˜ ë¶„ì„

#### 1. ê³„ì¸µí™”ëœ ì´ˆê¸°í™” ì „ëµ

```typescript
async initialize(): Promise<void> {
  try {
    // ğŸ—ï¸ 1ë‹¨ê³„: ì¸í”„ë¼ ì¤€ë¹„
    await this.ensureUserDataDirectory();
    this.db = new Database(this.dbPath);
    
    // ğŸš€ 2ë‹¨ê³„: ì„±ëŠ¥ ìµœì í™” ì„¤ì •
    this.db.pragma('journal_mode = WAL');  // Write-Ahead Logging
    this.db.pragma('foreign_keys = ON');   // ì°¸ì¡° ë¬´ê²°ì„±
    
    // ğŸ“‹ 3ë‹¨ê³„: ìŠ¤í‚¤ë§ˆ ê´€ë¦¬
    this.createTables();                   // í…Œì´ë¸” ìƒì„±
    this.performMigration();               // ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜
    
    // âœ… 4ë‹¨ê³„: ë¬´ê²°ì„± ê²€ì¦
    this.validateMigration();              // ë§ˆì´ê·¸ë ˆì´ì…˜ ê²€ì¦
    
  } catch (error) {
    this.logError('Database initialization failed:', error);
    throw error;
  }
}
```

**í•µì‹¬ ì„¤ê³„ íŒ¨í„´:**
- **ë‹¨ê³„ì  ì´ˆê¸°í™”**: ê° ë‹¨ê³„ì˜ ì„±ê³µì„ ë³´ì¥í•œ í›„ ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰
- **ì‹¤íŒ¨ ë³µêµ¬**: ê° ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨ ì‹œ ì•ˆì „í•œ ë¡¤ë°±
- **ë¡œê¹… í†µí•©**: ëª¨ë“  ì‘ì—…ì— ëŒ€í•œ ìƒì„¸í•œ ë¡œê¹…

#### 2. ìŠ¤í‚¤ë§ˆ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ

```typescript
private performMigration(): void {
  const currentVersion = this.getCurrentSchemaVersion();
  
  // ìˆœì°¨ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
  for (let version = currentVersion + 1; version <= this.CURRENT_SCHEMA_VERSION; version++) {
    this.logSchema(`Starting migration to version ${version}`);
    
    // ğŸ” íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì›ìì„± ë³´ì¥
    const migration = this.db.transaction(() => {
      switch (version) {
        case 2: this.migrateToVersion2(); break;
        case 3: this.migrateToVersion3(); break;
        case 4: this.migrateToVersion4(); break;
        default:
          throw new Error(`Unknown schema version: ${version}`);
      }
    });
    
    try {
      migration(); // ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
      this.updateSchemaVersion(version);
      this.logSchema(`Migration to version ${version} completed`);
    } catch (error) {
      this.logError(`Migration to version ${version} failed:`, error);
      throw error;
    }
  }
}
```

**ì„¤ê³„ ì¥ì :**
- **ë²„ì „ ì¶”ì **: í˜„ì¬ ìŠ¤í‚¤ë§ˆ ë²„ì „ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
- **ìˆœì°¨ ë§ˆì´ê·¸ë ˆì´ì…˜**: ì¤‘ê°„ ë²„ì „ì„ ê±´ë„ˆë›°ì§€ ì•Šê³  ìˆœì°¨ì  ì—…ê·¸ë ˆì´ë“œ
- **ì›ìì„±**: íŠ¸ëœì­ì…˜ì„ í†µí•œ ì „ì²´ ì„±ê³µ ë˜ëŠ” ì „ì²´ ì‹¤íŒ¨

#### 3. ë™ì  ì¿¼ë¦¬ ë¹Œë” íŒ¨í„´

```typescript
private buildProfileImageUrlColumn(
  notificationColumns: string[], 
  weverseColumns: string[], 
  weverseTableExists: boolean
): string {
  const parts: string[] = [];
  
  // ğŸ” ì»¬ëŸ¼ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¥¸ ë™ì  ì¿¼ë¦¬ ìƒì„±
  if (notificationColumns.includes('profile_image_url')) {
    parts.push('n.profile_image_url');
  }
  
  parts.push('s.profile_image_url');
  
  if (weverseTableExists && weverseColumns.includes('profile_image_url')) {
    parts.push('wa.profile_image_url');
  }
  
  // COALESCEë¡œ NULL ì²˜ë¦¬
  return parts.length > 1 ? `COALESCE(${parts.join(', ')})` : parts[0] || 'NULL';
}
```

**íŒ¨í„´ ë¶„ì„:**
- **ëŸ°íƒ€ì„ ìŠ¤í‚¤ë§ˆ ê²€ì‚¬**: ì‹¤í–‰ ì‹œì ì— í…Œì´ë¸”/ì»¬ëŸ¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
- **ì¡°ê±´ë¶€ ì¿¼ë¦¬**: ìŠ¤í‚¤ë§ˆ ìƒíƒœì— ë”°ë¥¸ ë‹¤ë¥¸ ì¿¼ë¦¬ ìƒì„±
- **NULL ì•ˆì „ì„±**: COALESCEë¡œ ì•ˆì „í•œ ê¸°ë³¸ê°’ ì²˜ë¦¬

### MonitoringService ë³µí•© ì„œë¹„ìŠ¤ ê´€ë¦¬

#### 1. ì„œë¹„ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ íŒ¨í„´

```typescript
export class MonitoringService {
  // ğŸ¼ ì—¬ëŸ¬ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ë¥¼ ì¡°ìœ¨
  private chzzkMonitor: ChzzkMonitor;      // ì¹˜ì§€ì§ ëª¨ë‹ˆí„°ë§
  private twitterMonitor: TwitterMonitor;  // íŠ¸ìœ„í„° ëª¨ë‹ˆí„°ë§  
  private cafeMonitor: CafeMonitor;        // ì¹´í˜ ëª¨ë‹ˆí„°ë§
  private weverseMonitor: WeiverseMonitor; // ìœ„ë²„ìŠ¤ ëª¨ë‹ˆí„°ë§

  constructor(databaseManager: DatabaseManager, notificationService: NotificationService) {
    // ê° ì„œë¹„ìŠ¤ì— ê³µí†µ ì˜ì¡´ì„± ì£¼ì…
    this.chzzkMonitor = new ChzzkMonitor(databaseManager, notificationService);
    this.twitterMonitor = new TwitterMonitor(databaseManager, notificationService, settingsService);
    this.cafeMonitor = new CafeMonitor(databaseManager, notificationService, settingsService);
    this.weverseMonitor = new WeiverseMonitor(databaseManager, notificationService, settingsService);
    
    // ì–‘ë°©í–¥ ì°¸ì¡° ì„¤ì • (ìˆœí™˜ ì°¸ì¡° ì£¼ì˜)
    this.chzzkMonitor.setMonitoringService(this);
  }
}
```

#### 2. ìƒíƒœ ë³µì› ë° ì ˆì „ ëª¨ë“œ ê°ì§€

```typescript
async start(): Promise<boolean> {
  try {
    // ğŸ”„ 1ë‹¨ê³„: ìƒíƒœ ì´ˆê¸°í™”
    await this.databaseManager.initializeMonitorStates();
    
    // ğŸ”™ 2ë‹¨ê³„: ì´ì „ ìƒíƒœ ë³µì›
    await this.restoreMonitoringStates();
    
    // ğŸ” 3ë‹¨ê³„: ê° ì„œë¹„ìŠ¤ë³„ ì´ˆê¸°í™”
    await this.cafeMonitor.initialize();
    await this.twitterMonitor.checkInstanceHealth();
    await this.weverseMonitor.initialize();
    
    // ğŸ“± 4ë‹¨ê³„: ë¡œê·¸ì¸ ìƒíƒœ ëª¨ë‹ˆí„°ë§
    await this.initializeLoginStatus();
    this.startLoginStatusMonitoring();
    
    // ğŸ“Š 5ë‹¨ê³„: ê¸°ì¤€ì„  ì„¤ì • (ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€)
    await this.establishBaselinesForNewStreamers();
    
    // ğŸš€ 6ë‹¨ê³„: ëˆ„ë½ ì•Œë¦¼ ë³µêµ¬ (ì ˆì „ ëª¨ë“œ ëŒ€ì‘)
    await this.recoverMissedNotifications();
    
    return true;
  } catch (error) {
    this.isRunning = false;
    throw error;
  }
}
```

**ê³ ê¸‰ ê¸°ëŠ¥ë“¤:**
- **ìƒíƒœ ì§€ì†ì„±**: ì•± ì¬ì‹œì‘ ì‹œ ì´ì „ ëª¨ë‹ˆí„°ë§ ìƒíƒœ ë³µì›
- **ì ˆì „ ëª¨ë“œ ê°ì§€**: ì‹œìŠ¤í…œ ì ˆì „ í›„ ëˆ„ë½ëœ ì•Œë¦¼ ìë™ ë³µêµ¬
- **ê¸°ì¤€ì„  ì„¤ì •**: ìƒˆ ìŠ¤íŠ¸ë¦¬ë¨¸ ì¶”ê°€ ì‹œ ê³¼ê±° ì•Œë¦¼ ë°©ì§€

#### 3. 3ë‹¨ê³„ ì„¸ì…˜ ë³µêµ¬ ì‹œìŠ¤í…œ

```typescript
async recoverMissedNotifications(): Promise<void> {
  const now = Date.now();
  const timeSinceLastCheck = now - this.lastMonitoringTime;
  
  // ì ˆì „ ëª¨ë“œ ê°ì§€ (10ë¶„ ì´ìƒ ëª¨ë‹ˆí„°ë§ ì¤‘ë‹¨)
  if (timeSinceLastCheck > this.sleepDetectionThreshold) {
    console.log(`ğŸ›Œ Sleep mode detected (${Math.round(timeSinceLastCheck / 60000)}m gap), starting recovery...`);
    
    try {
      // ğŸ”„ 1ë‹¨ê³„: ì¿ í‚¤ ê¸°ë°˜ ì„¸ì…˜ ë³µì›
      await this.attemptSessionRestore();
      
      // ğŸ”‘ 2ë‹¨ê³„: í† í° ê°±ì‹ 
      await this.attemptTokenRefresh();
      
      // ğŸšª 3ë‹¨ê³„: ì¬ë¡œê·¸ì¸ (ìµœí›„ ìˆ˜ë‹¨)
      await this.attemptRelogin();
      
    } catch (error) {
      console.error('âŒ Session recovery failed:', error);
      // ì‚¬ìš©ìì—ê²Œ ìˆ˜ë™ ë¡œê·¸ì¸ ìš”ì²­ ì•Œë¦¼
    }
  }
}
```

#### 4. ì´ë²¤íŠ¸ ê¸°ë°˜ ìƒíƒœ ì „íŒŒ

```typescript
// ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ì—ì„œ UIë¡œ ìƒíƒœ ì „íŒŒ
private async broadcastStatusUpdate(): Promise<void> {
  const stats = await this.getMonitoringStats();
  
  // ë©”ì¸ ìœˆë„ìš°ë¡œ ìƒíƒœ ì „ì†¡
  const mainWindow = BrowserWindow.getAllWindows()[0];
  if (mainWindow) {
    mainWindow.webContents.send('monitoring-stats-updated', stats);
  }
  
  // íŠ¸ë ˆì´ ë©”ë‰´ ì—…ë°ì´íŠ¸
  if (this.trayService) {
    this.trayService.updateContextMenu(stats);
  }
}
```

## ì‹¤ìŠµ ì˜ˆì œ

### ì‹¤ìŠµ 1: ì„œë¹„ìŠ¤ ì˜ì¡´ì„± ê·¸ë˜í”„ ë¶„ì„

1. **ì˜ì¡´ì„± ê´€ê³„ ì‹œê°í™”:**
```bash
# í”„ë¡œì íŠ¸ì—ì„œ import ê´€ê³„ ë¶„ì„
grep -r "import.*Service" src/main/services/ | head -20

# ìˆœí™˜ ì˜ì¡´ì„± ê²€ì‚¬
npm install -g madge
madge --circular src/main/services/
```

2. **ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´ í™•ì¸:**
```typescript
// MonitoringService.tsì˜ constructor ë¶„ì„
constructor(
  private databaseManager: DatabaseManager,        // ë°ì´í„° ê³„ì¸µ
  private notificationService: NotificationService // ì•Œë¦¼ ê³„ì¸µ
) {
  // ì„¤ì • ì„œë¹„ìŠ¤ëŠ” ë‚´ë¶€ì—ì„œ ìƒì„± (ì˜ì¡´ì„± ë ˆë²¨ ê³ ë ¤)
  this.settingsService = new SettingsService(databaseManager);
}
```

### ì‹¤ìŠµ 2: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸

1. **ìŠ¤í‚¤ë§ˆ ë²„ì „ í™•ì¸:**
```sql
-- SQLiteì—ì„œ í˜„ì¬ ìŠ¤í‚¤ë§ˆ ë²„ì „ í™•ì¸
SELECT value FROM app_settings WHERE key = 'schema_version';

-- í…Œì´ë¸” êµ¬ì¡° í™•ì¸
.schema streamers
.schema notifications
```

2. **ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œë®¬ë ˆì´ì…˜:**
```typescript
// í…ŒìŠ¤íŠ¸ìš© ë§ˆì´ê·¸ë ˆì´ì…˜ í•¨ìˆ˜
private testMigration(): void {
  const testDb = new Database(':memory:'); // ë©”ëª¨ë¦¬ DBë¡œ í…ŒìŠ¤íŠ¸
  
  // ì´ì „ ë²„ì „ ìŠ¤í‚¤ë§ˆ ìƒì„±
  testDb.exec(`
    CREATE TABLE old_streamers (
      id INTEGER PRIMARY KEY,
      name TEXT NOT NULL
    );
  `);
  
  // ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
  testDb.exec(`
    ALTER TABLE old_streamers ADD COLUMN profile_image_url TEXT;
  `);
  
  console.log('Migration test completed');
}
```

### ì‹¤ìŠµ 3: ì„œë¹„ìŠ¤ ìƒíƒœ ëª¨ë‹ˆí„°ë§

1. **ì„œë¹„ìŠ¤ í—¬ìŠ¤ ì²´í¬ ì‹œìŠ¤í…œ:**
```typescript
// ê° ì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” í—¬ìŠ¤ì²´í¬
async getServiceHealthStatus(): Promise<Record<string, boolean>> {
  return {
    database: this.databaseManager.isHealthy(),
    chzzk: await this.chzzkMonitor.checkHealth(),
    twitter: await this.twitterMonitor.checkHealth(),
    cafe: await this.cafeMonitor.checkHealth(),
    weverse: await this.weverseMonitor.checkHealth()
  };
}
```

2. **ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘:**
```typescript
// ì„œë¹„ìŠ¤ë³„ ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘
interface ServiceMetrics {
  responseTime: number;
  errorRate: number;
  requestCount: number;
  lastCheck: Date;
}

class MetricsCollector {
  private metrics: Map<string, ServiceMetrics> = new Map();
  
  recordServiceCall(serviceName: string, duration: number, success: boolean): void {
    const current = this.metrics.get(serviceName) || {
      responseTime: 0,
      errorRate: 0,
      requestCount: 0,
      lastCheck: new Date()
    };
    
    // ì´ë™ í‰ê· ìœ¼ë¡œ ì‘ë‹µ ì‹œê°„ ê³„ì‚°
    current.responseTime = (current.responseTime + duration) / 2;
    current.requestCount++;
    current.errorRate = success ? current.errorRate * 0.9 : current.errorRate * 0.9 + 0.1;
    current.lastCheck = new Date();
    
    this.metrics.set(serviceName, current);
  }
}
```

## ê³¼ì œ

### ê³¼ì œ 1: ì„œë¹„ìŠ¤ ì¶”ìƒí™” ë ˆì´ì–´ ì„¤ê³„

ë‹¤ìŒ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì„œë¹„ìŠ¤ë“¤ì„ ì¶”ìƒí™”í•˜ì„¸ìš”:

```typescript
// ëª¨ë“  ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ê°€ êµ¬í˜„í•´ì•¼ í•  ì¸í„°í˜ì´ìŠ¤
interface IMonitoringService {
  initialize(): Promise<void>;
  start(): Promise<boolean>;
  stop(): Promise<boolean>;
  checkHealth(): Promise<boolean>;
  getStatus(): Promise<ServiceStatus>;
}

// ì„œë¹„ìŠ¤ íŒ©í† ë¦¬ íŒ¨í„´
class MonitoringServiceFactory {
  static createService(type: 'chzzk' | 'twitter' | 'cafe' | 'weverse'): IMonitoringService {
    // íƒ€ì…ì— ë”°ë¥¸ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
  }
}
```

### ê³¼ì œ 2: ì´ë²¤íŠ¸ ê¸°ë°˜ ì„œë¹„ìŠ¤ í†µì‹  êµ¬í˜„

ì„œë¹„ìŠ¤ ê°„ ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹  ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ì„¸ìš”:

```typescript
// ì´ë²¤íŠ¸ ê¸°ë°˜ í†µì‹  ì‹œìŠ¤í…œ
class ServiceEventBus {
  private events: Map<string, Function[]> = new Map();
  
  subscribe(event: string, handler: Function): void {
    // ì´ë²¤íŠ¸ êµ¬ë…
  }
  
  publish(event: string, data: any): void {
    // ì´ë²¤íŠ¸ ë°œí–‰
  }
  
  unsubscribe(event: string, handler: Function): void {
    // êµ¬ë… í•´ì œ
  }
}

// ì‚¬ìš© ì˜ˆì‹œ
serviceBus.subscribe('streamer.live', (data) => {
  notificationService.sendLiveNotification(data);
});

serviceBus.publish('streamer.live', { streamerId: 123, isLive: true });
```

### ê³¼ì œ 3: ì„œë¹„ìŠ¤ ìƒíƒœ ì§€ì†ì„± ì‹œìŠ¤í…œ

ì„œë¹„ìŠ¤ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  ë³µì›í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ì„¸ìš”:

```typescript
interface ServiceState {
  serviceName: string;
  lastCheck: Date;
  isActive: boolean;
  configuration: Record<string, any>;
  metrics: ServiceMetrics;
}

class ServiceStateManager {
  async saveState(serviceName: string, state: ServiceState): Promise<void> {
    // ìƒíƒœë¥¼ ì•”í˜¸í™”í•˜ì—¬ ì €ì¥
  }
  
  async loadState(serviceName: string): Promise<ServiceState | null> {
    // ì €ì¥ëœ ìƒíƒœë¥¼ ë³µí˜¸í™”í•˜ì—¬ ë¡œë“œ
  }
  
  async clearState(serviceName: string): Promise<void> {
    // ìƒíƒœ ì •ë³´ ì‚­ì œ
  }
}
```

## ì¶”ê°€ í•™ìŠµ ìë£Œ

### ì•„í‚¤í…ì²˜ íŒ¨í„´
- [Service-Oriented Architecture](https://martinfowler.com/articles/microservices.html)
- [Dependency Injection íŒ¨í„´](https://martinfowler.com/articles/injection.html)
- [Circuit Breaker íŒ¨í„´](https://martinfowler.com/bliki/CircuitBreaker.html)

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„
- [ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ](https://flywaydb.org/documentation/concepts/migrations)
- [SQLite ìµœì í™”](https://www.sqlite.org/optoverview.html)

### ì„œë¹„ìŠ¤ ëª¨ë‹ˆí„°ë§
- [Application Performance Monitoring](https://newrelic.com/resources/articles/what-is-application-monitoring)
- [Health Check íŒ¨í„´](https://microservices.io/patterns/observability/health-check-api.html)

### ë‹¤ìŒ í•™ìŠµ ì˜ˆê³ 
**9ì¼ì°¨ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ í†µí•©ì„ ì‹¬í™” í•™ìŠµí•©ë‹ˆë‹¤. better-sqlite3ì„ í™œìš©í•œ ê³ ì„±ëŠ¥ ë°ì´í„° ì²˜ë¦¬, íŠ¸ëœì­ì…˜ ê´€ë¦¬, ê·¸ë¦¬ê³  ë°ì´í„° ëª¨ë¸ë§ ëª¨ë²” ì‚¬ë¡€ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.**

---
*ğŸ¯ í•™ìŠµ íŒ: ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ëŠ” ë‹¨ìˆœíˆ ì½”ë“œë¥¼ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ì˜ ì±…ì„ê³¼ ê²½ê³„ë¥¼ ëª…í™•íˆ í•˜ê³ , ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ì—ìš”!*