# 3ì¼ì°¨: Renderer Processì™€ React í†µí•©

## í•™ìŠµ ëª©í‘œ
- Renderer Processì˜ ì—­í• ê³¼ ì œì•½ì‚¬í•­ì„ ì´í•´í•œë‹¤
- Reactì™€ Electronì˜ í†µí•© ë°©ì‹ì„ í•™ìŠµí•œë‹¤
- App.tsxì˜ êµ¬ì¡°ì™€ ìƒíƒœ ê´€ë¦¬ë¥¼ ë¶„ì„í•œë‹¤
- IPCë¥¼ í†µí•œ Main-Renderer í†µì‹ ì„ ì´í•´í•œë‹¤

## ì´ë¡  í•™ìŠµ

### Renderer Processì˜ íŠ¹ì§•

#### 1. ë¸Œë¼ìš°ì € í™˜ê²½ê³¼ì˜ ìœ ì‚¬ì„±
- **Chromium ì—”ì§„** ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰
- **DOM API** ì™„ì „ ì§€ì›
- **ì›¹ í‘œì¤€** (HTML, CSS, JavaScript) ì‚¬ìš©
- **ëª¨ë˜ ì›¹ í”„ë ˆì„ì›Œí¬** ì‚¬ìš© ê°€ëŠ¥

#### 2. ë³´ì•ˆ ì œì•½ì‚¬í•­
- **Node.js API ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€** (nodeIntegration: false)
- **íŒŒì¼ ì‹œìŠ¤í…œ ì§ì ‘ ì ‘ê·¼ ì œí•œ**
- **ì‹œìŠ¤í…œ API í˜¸ì¶œ ë¶ˆê°€**
- **IPCë¥¼ í†µí•œ ê°„ì ‘ ì ‘ê·¼ë§Œ ê°€ëŠ¥**

#### 3. ë©€í‹°í”„ë¡œì„¸ìŠ¤ ì•„í‚¤í…ì²˜
- **ì—¬ëŸ¬ ë Œë”ëŸ¬ í”„ë¡œì„¸ìŠ¤** ë™ì‹œ ì‹¤í–‰ ê°€ëŠ¥
- **í”„ë¡œì„¸ìŠ¤ ê°„ ê²©ë¦¬**ë¡œ ì•ˆì •ì„± í–¥ìƒ
- **í¬ë˜ì‹œ ì‹œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì˜í–¥ ì—†ìŒ**

### Reactì™€ Electronì˜ í†µí•©

#### 1. ê°œë°œ í™˜ê²½ ì„¤ì •
```json
// webpack.renderer.config.jsì˜ í•µì‹¬ ì„¤ì •
{
  "target": "electron-renderer",    // Electron ë Œë”ëŸ¬ í™˜ê²½
  "entry": "./src/renderer/index.tsx",
  "devServer": {
    "port": 3000                    // ê°œë°œ ì„œë²„ í¬íŠ¸
  }
}
```

#### 2. í”„ë¡œë•ì…˜ ë¹Œë“œ
- **ì •ì  íŒŒì¼ ìƒì„±**: HTML, CSS, JSë¡œ ë²ˆë“¤ë§
- **ë¡œì»¬ íŒŒì¼ ë¡œë”©**: `file://` í”„ë¡œí† ì½œ ì‚¬ìš©
- **ìµœì í™”**: ì½”ë“œ ë¶„í• , ì••ì¶•, íŠ¸ë¦¬ ì‰ì´í‚¹

## ì½”ë“œ ë¶„ì„

### App.tsxì˜ ì „ì²´ êµ¬ì¡° ë¶„ì„

#### 1. ìƒíƒœ ê´€ë¦¬ ì „ëµ

```typescript
const [streamers, setStreamers] = useState<StreamerData[]>([]);
const [notifications, setNotifications] = useState<NotificationRecord[]>([]);
const [weverseArtists, setWeverseArtists] = useState<WeverseArtist[]>([]);
const [liveStatuses, setLiveStatuses] = useState<LiveStatus[]>([]);
const [stats, setStats] = useState<MonitoringStats>({...});
```

**ìƒíƒœ ì„¤ê³„ íŒ¨í„´:**
- **ë„ë©”ì¸ë³„ ë¶„ë¦¬**: ìŠ¤íŠ¸ë¦¬ë¨¸, ì•Œë¦¼, ìœ„ë²„ìŠ¤ ë“± ë„ë©”ì¸ë³„ë¡œ ìƒíƒœ ë¶„ë¦¬
- **íƒ€ì… ì•ˆì „ì„±**: TypeScriptë¥¼ í™œìš©í•œ ê°•íƒ€ì… ìƒíƒœ ê´€ë¦¬
- **ì¤‘ì•™ ì§‘ì¤‘ì‹**: App ì»´í¬ë„ŒíŠ¸ì—ì„œ ì „ì—­ ìƒíƒœ ê´€ë¦¬#### 2. IPC í†µì‹  íŒ¨í„´

```typescript
// Main Processì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
const streamersData = await window.electronAPI.getStreamers();
setStreamers(streamersData);

// Main Processì— ë°ì´í„° ì „ì†¡í•˜ê¸°
await window.electronAPI.addStreamer(streamerData);

// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
window.electronAPI.on('notification-history-updated', (notifications) => {
  setNotifications(notifications);
});
```

**í†µì‹  íŒ¨í„´ ë¶„ì„:**
- **Request-Response**: `invoke`ë¥¼ í†µí•œ ë¹„ë™ê¸° ìš”ì²­-ì‘ë‹µ
- **Event-Driven**: `on`ì„ í†µí•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- **Type Safety**: TypeScriptë¡œ API ê³„ì•½ ì •ì˜

#### 3. ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°ì™€ ì´ˆê¸°í™”

```typescript
useEffect(() => {
  initializeApp();           // ì•± ì´ˆê¸°í™”
  setupEventListeners();     // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
  
  return () => {
    cleanupEventListeners(); // ì •ë¦¬ ì‘ì—…
  };
}, []);
```

**ì´ˆê¸°í™” ìˆœì„œ:**
1. **ë°ì´í„° ë¡œë”©**: ìŠ¤íŠ¸ë¦¬ë¨¸, ì•Œë¦¼, ì„¤ì • ë“±
2. **ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •**: Main Process ì´ë²¤íŠ¸ êµ¬ë…
3. **ìƒíƒœ ë™ê¸°í™”**: ë¡œë”©ëœ ë°ì´í„°ë¡œ UI ìƒíƒœ ì—…ë°ì´íŠ¸

#### 4. ì—ëŸ¬ ì²˜ë¦¬ì™€ ì‚¬ìš©ì í”¼ë“œë°±

```typescript
const handleAddStreamer = async (streamerData) => {
  try {
    console.log('â• Adding streamer:', streamerData.name);
    
    if (window.electronAPI?.addStreamer) {
      const newStreamer = await window.electronAPI.addStreamer(streamerData);
      console.log('âœ… Streamer added successfully:', newStreamer);
      
      // ìƒíƒœ ì—…ë°ì´íŠ¸
      const updatedStreamers = await window.electronAPI.getStreamers();
      setStreamers(updatedStreamers);
    }
  } catch (error) {
    console.error('âŒ Failed to add streamer:', error);
    alert('ìŠ¤íŠ¸ë¦¬ë¨¸ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
  }
};
```

**ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´:**
- **Try-Catch**: ë¹„ë™ê¸° ì‘ì—…ì˜ ì˜ˆì™¸ ì²˜ë¦¬
- **ì‚¬ìš©ì í”¼ë“œë°±**: alertë¥¼ í†µí•œ ì¦‰ì‹œ í”¼ë“œë°±
- **ë¡œê¹…**: ê°œë°œììš© ìƒì„¸ ë¡œê·¸
- **ìƒíƒœ ë³µêµ¬**: ì‹¤íŒ¨ ì‹œ ì´ì „ ìƒíƒœ ìœ ì§€

#### 5. ë¡œë”© ìƒíƒœì™€ UX

```typescript
const [isLoading, setIsLoading] = useState(false);
const [isWeverseLoginLoading, setIsWeverseLoginLoading] = useState(false);

// ë¡œë”© ì˜¤ë²„ë ˆì´ UI
{isWeverseLoginLoading && (
  <div className="fixed inset-0 bg-black/70 backdrop-blur-sm z-50">
    <div className="glass-card p-8 text-center">
      <div className="spinner spinner-lg mb-6"></div>
      <h2 className="text-xl font-bold">ìœ„ë²„ìŠ¤ ë¡œê·¸ì¸ ì¤‘</h2>
      <p className="text-gray-400">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</p>
    </div>
  </div>
)}
```

**UX ì„¤ê³„ íŒ¨í„´:**
- **ë¡œë”© ì¸ë””ì¼€ì´í„°**: ì‚¬ìš©ìì—ê²Œ ì§„í–‰ ìƒíƒœ í‘œì‹œ
- **ì „ì²´ í™”ë©´ ì˜¤ë²„ë ˆì´**: ì¤‘ìš”í•œ ì‘ì—… ì¤‘ ë‹¤ë¥¸ ì¡°ì‘ ë°©ì§€
- **ìƒì„¸ ë©”ì‹œì§€**: í˜„ì¬ ìˆ˜í–‰ ì¤‘ì¸ ì‘ì—… ì•ˆë‚´

#### 6. ë¼ìš°íŒ… êµ¬ì¡°

```typescript
<Routes>
  <Route path="/" element={<StreamerManagement />} />
  <Route path="/notifications" element={<NotificationHistory />} />
  <Route path="/weverse" element={<WeverseManagement />} />
  <Route path="/settings" element={<Settings />} />
  <Route path="*" element={<Navigate to="/" replace />} />
</Routes>
```

**SPA ë¼ìš°íŒ… íŒ¨í„´:**
- **Hash ë¼ìš°íŒ…**: Electron í™˜ê²½ì— ì í•©í•œ ë¼ìš°íŒ… ë°©ì‹
- **ê¸°ë³¸ ë¼ìš°íŠ¸**: `/`ë¥¼ ë©”ì¸ í˜ì´ì§€ë¡œ ì„¤ì •
- **Fallback**: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ë¡œëŠ” ë©”ì¸ìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜

## ì‹¤ìŠµ ì˜ˆì œ

### ì‹¤ìŠµ 1: React ê°œë°œì ë„êµ¬ í™œìš©

1. **ê°œë°œ ëª¨ë“œì—ì„œ ì•± ì‹¤í–‰:**
```bash
npm run dev
```

2. **ê°œë°œì ë„êµ¬ ì—´ê¸°:**
   - `F12` í‚¤ ë˜ëŠ” `Ctrl+Shift+I`
   - React DevTools íƒ­ í™•ì¸

3. **ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ íƒìƒ‰:**
   - App ì»´í¬ë„ŒíŠ¸ì˜ state í™•ì¸
   - í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë“¤ì˜ props í™•ì¸

### ì‹¤ìŠµ 2: IPC í†µì‹  í…ŒìŠ¤íŠ¸

1. **ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ IPC API í…ŒìŠ¤íŠ¸:**
```javascript
// ìŠ¤íŠ¸ë¦¬ë¨¸ ëª©ë¡ ì¡°íšŒ
window.electronAPI.getStreamers().then(console.log);

// ì„¤ì • ì¡°íšŒ
window.electronAPI.getSettings().then(console.log);

// ì•Œë¦¼ ê°œìˆ˜ ì¡°íšŒ
window.electronAPI.getUnreadCount().then(console.log);
```

2. **ê²°ê³¼ ê´€ì°°:**
   - ê° API í˜¸ì¶œì˜ ì‘ë‹µ êµ¬ì¡° í™•ì¸
   - íƒ€ì… ì •ì˜ì™€ ì‹¤ì œ ë°ì´í„° ë¹„êµ

### ì‹¤ìŠµ 3: ìƒíƒœ ë³€í™” ì¶”ì 

1. **React DevToolsì—ì„œ ìƒíƒœ ë³€í™” ê´€ì°°:**
   - ìŠ¤íŠ¸ë¦¬ë¨¸ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ì‹œ ìƒíƒœ ë³€í™”
   - ì•Œë¦¼ ëª©ë¡ ìƒˆë¡œê³ ì¹¨ ì‹œ ìƒíƒœ ë³€í™”
   - ì„¤ì • ë³€ê²½ ì‹œ ìƒíƒœ ë³€í™”

2. **ì½˜ì†” ë¡œê·¸ ë¶„ì„:**
   - ê° ì‘ì—…ì˜ ë¡œê·¸ ë©”ì‹œì§€ í™•ì¸
   - ì—ëŸ¬ ë°œìƒ ì‹œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ ë¶„ì„## ê³¼ì œ

### ê³¼ì œ 1: ìƒíƒœ ê´€ë¦¬ ë¶„ì„
App.tsxì˜ ìƒíƒœ ê´€ë¦¬ êµ¬ì¡°ë¥¼ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µí•˜ì„¸ìš”:

1. **ì™œ ëª¨ë“  ìƒíƒœë¥¼ App ì»´í¬ë„ŒíŠ¸ì—ì„œ ê´€ë¦¬í•˜ëŠ”ê°€?**
   - ë‹¤ë¥¸ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Redux, Zustand ë“±) ëŒ€ì‹  useStateë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ”?
   - ìƒíƒœë¥¼ ê° í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê´€ë¦¬í•˜ì§€ ì•Šì€ ì´ìœ ëŠ”?

2. **ìƒíƒœ ì—…ë°ì´íŠ¸ íŒ¨í„´ ë¶„ì„:**
```typescript
// íŒ¨í„´ 1: ì§ì ‘ ì—…ë°ì´íŠ¸
setStreamers(updatedStreamers);

// íŒ¨í„´ 2: í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸  
setStats(prevStats => ({
  ...prevStats,
  totalNotifications: updatedNotifications.length
}));
```
ê° íŒ¨í„´ì´ ì‚¬ìš©ë˜ëŠ” ìƒí™©ê³¼ ì´ìœ ë¥¼ ë¶„ì„í•˜ì„¸ìš”.

### ê³¼ì œ 2: IPC í†µì‹  íŒ¨í„´ ì—°êµ¬

```typescript
// 1. Request-Response íŒ¨í„´
const result = await window.electronAPI.addStreamer(data);

// 2. Event-Driven íŒ¨í„´
window.electronAPI.on('notification-history-updated', callback);

// 3. One-way íŒ¨í„´
window.electronAPI.openExternal(url);
```

**ì§ˆë¬¸:**
1. **ê° íŒ¨í„´ì´ ì í•©í•œ ìƒí™©ì€ ì–¸ì œì¸ê°€?**
2. **Event-Driven íŒ¨í„´ì˜ ì¥ë‹¨ì ì€ ë¬´ì—‡ì¸ê°€?**
3. **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì–´ë–¤ ì •ë¦¬ ì‘ì—…ì´ í•„ìš”í•œê°€?**

### ê³¼ì œ 3: ì—ëŸ¬ ì²˜ë¦¬ ê°œì„  ë°©ì•ˆ

í˜„ì¬ ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ì„ ë¶„ì„í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì œì‹œí•˜ì„¸ìš”:

```typescript
catch (error) {
  console.error('âŒ Failed to add streamer:', error);
  alert('ìŠ¤íŠ¸ë¦¬ë¨¸ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
}
```

**ê°œì„  ê³¼ì œ:**
1. **alert ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë” ë‚˜ì€ UI íŒ¨í„´ì€?**
2. **ì—ëŸ¬ íƒ€ì…ì— ë”°ë¥¸ ì°¨ë³„í™”ëœ ì²˜ë¦¬ ë°©ë²•ì€?**
3. **ì—ëŸ¬ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ê´€ë¦¬í•  ê²ƒì¸ê°€?**

### ê³¼ì œ 4: ì‹¤ìŠµ - ê°„ë‹¨í•œ ì»´í¬ë„ŒíŠ¸ ì‘ì„±

ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•˜ëŠ” ê°„ë‹¨í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”:

**ìš”êµ¬ì‚¬í•­:**
1. **í˜„ì¬ ì‹œê°„ì„ í‘œì‹œí•˜ëŠ” Clock ì»´í¬ë„ŒíŠ¸**
2. **1ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸**
3. **IPCë¥¼ í†µí•´ Main Processì—ì„œ í˜„ì¬ ì‹œê°„ ê°€ì ¸ì˜¤ê¸°**
4. **ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì •ë¦¬**

```typescript
// íŒíŠ¸: ì´ëŸ° êµ¬ì¡°ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”
const Clock: React.FC = () => {
  const [currentTime, setCurrentTime] = useState<string>('');

  useEffect(() => {
    // 1ì´ˆë§ˆë‹¤ ì‹œê°„ ì—…ë°ì´íŠ¸
    const interval = setInterval(async () => {
      // IPCë¡œ ì‹œê°„ ê°€ì ¸ì˜¤ê¸°
      const time = await window.electronAPI.getCurrentTime();
      setCurrentTime(time);
    }, 1000);

    return () => clearInterval(interval); // ì •ë¦¬ ì‘ì—…
  }, []);

  return (
    <div className="clock">
      í˜„ì¬ ì‹œê°„: {currentTime}
    </div>
  );
};
```

**ì¶”ê°€ ë„ì „:**
- ì‹œê°„ëŒ€ ë³€ê²½ ê¸°ëŠ¥ ì¶”ê°€
- ë‹¤ì–‘í•œ ì‹œê°„ í‘œì‹œ í˜•ì‹ ì§€ì›
- ì—ëŸ¬ ìƒí™© ì²˜ë¦¬ (IPC í†µì‹  ì‹¤íŒ¨ ë“±)

## ì¶”ê°€ í•™ìŠµ ìë£Œ

### Reactì™€ Electron í†µí•©
- [Electron + React ê³µì‹ ê°€ì´ë“œ](https://www.electronjs.org/docs/latest/tutorial/tutorial-prerequisites)
- [Create React Appê³¼ Electron í†µí•©](https://www.electronjs.org/docs/latest/tutorial/tutorial-packaging)

### ìƒíƒœ ê´€ë¦¬ íŒ¨í„´
- [React Hooks íŒ¨í„´](https://react.dev/reference/react)
- [ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ](https://react.dev/learn/managing-state)

### ì„±ëŠ¥ ìµœì í™”
- [React ì„±ëŠ¥ ìµœì í™”](https://react.dev/learn/render-and-commit)
- [Electron ë Œë”ëŸ¬ ìµœì í™”](https://www.electronjs.org/docs/latest/tutorial/performance)

### ë‹¤ìŒ í•™ìŠµ ì˜ˆê³ 
**4ì¼ì°¨ì—ì„œëŠ” Preload Scriptì™€ IPC í†µì‹ ì„ ìƒì„¸íˆ í•™ìŠµí•©ë‹ˆë‹¤. `preload.ts` íŒŒì¼ì„ ë¶„ì„í•˜ë©° ì•ˆì „í•œ API ë…¸ì¶œ ë°©ë²•ê³¼ Context Bridge íŒ¨í„´ì„ ì´í•´í•©ë‹ˆë‹¤.**

---
*ğŸ¯ í•™ìŠµ íŒ: Renderer ProcessëŠ” ì¼ë°˜ì ì¸ ì›¹ ê°œë°œê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, IPC í†µì‹ ì´ í•µì‹¬ì…ë‹ˆë‹¤. Main Processì™€ì˜ í˜‘ë ¥ íŒ¨í„´ì„ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”!*